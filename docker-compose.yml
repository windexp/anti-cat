##########################
# GLOBAL NETWORK
##########################
networks:
  proxy_net:
    external: true

##########################
# SERVICES
##########################
services:

  anti-cat:
    build: ./
    container_name: anti-cat
    restart: unless-stopped
    command: ["uvicorn", "src.main:app", "--host", "0.0.0.0", "--port", "8150", "--reload", "--reload-dir", "/app/src"]
    volumes:
      # 전체 프로젝트를 마운트해서 --reload 반영 (src/static/data/.env 포함)
      - ./:/app
      - ./.env:/app/.env:ro
    environment:
      - TZ=Asia/Seoul
      # 환경변수는 .env 파일에서 자동으로 로드됨
      - PYTHONUNBUFFERED=1
    networks:
      - proxy_net

